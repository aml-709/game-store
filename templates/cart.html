<!doctype html>
<html>
<head><title>Корзина</title></head>
<body>
    
    {{ template "header.html" . }}

<h1>Корзина</h1>

{{ if .Games }}
  <ul class="list-group">
    {{ range .Games }}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ .Title }}</strong><br>
          <small class="text-muted">Количество: {{ .Quantity }}</small>
        </div>
        <div class="d-flex align-items-center gap-2">
          <span class="badge bg-secondary me-3">{{ printf "%.2f" .Price }} $</span>

          <form action="/remove-from-cart" method="POST" class="m-0">
            <!-- отправляем оба поля: cart_id при наличии, и id (game_id) как fallback -->
            <input type="hidden" name="cart_id" value="{{ .CartID }}">
            <input type="hidden" name="id" value="{{ .ID }}">
            <button type="submit" class="btn btn-sm btn-outline-danger">Удалить</button>
          </form>
        </div>
      </li>
    {{ end }}
  </ul>
  <div class="mt-3">
    <a href="/checkout" class="btn btn-primary">Оформить</a>
  </div>
{{ else }}
  <div class="alert alert-info">Корзина пуста</div>
{{ end }}

<p><a href="/" class="btn btn-link">Вернуться в магазин</a></p>

</main>
{{ template "footer.html" . }}
</body>
</html>
